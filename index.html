<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 6.1.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="5AUIVYTbHIAuz-eQtxSfZbWW5eg9_EVZMSQycIuXrG0">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.loli.net/css?family=Lato:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"theme-next.js.org","root":"/","images":"/images","scheme":"Gemini","darkmode":true,"version":"8.11.1","exturl":true,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":true,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":true,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":true,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.json","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.11.1/source/js/config.min.js"></script>

    <meta property="og:type" content="website">
<meta property="og:title" content="Lullaby">
<meta property="og:url" content="https://theme-next.js.org/index.html">
<meta property="og:site_name" content="Lullaby">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://theme-next.js.org/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Lullaby - Hester's Personal Website</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-108155018-3"></script>
  <script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"UA-108155018-3","only_pageview":false}</script>
  <script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.11.1/source/js/third-party/analytics/google-analytics.min.js"></script>





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="Lullaby" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Lullaby</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Hester's Personal Website</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-bell fa-fw"></i>Home</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives<span class="badge">4</span></a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="HesterG"
      src="/images/avatar.jpeg">
  <p class="site-author-name" itemprop="name">HesterG</p>
  <div class="site-description" itemprop="description">The world's my Oyster.</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">4</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0hlc3Rlckc=" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;HesterG"><i class="fab fa-github fa-fw"></i></span>
      </span>
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly93d3cubGlua2VkaW4uY29tL2luL3hpbnlpLWdvbmctN2E1MzIwMTI1Lw==" title="Crowdin → https:&#x2F;&#x2F;www.linkedin.com&#x2F;in&#x2F;xinyi-gong-7a5320125&#x2F;"><i class="fab fa-linkedin fa-fw"></i></span>
      </span>
  </div>
  <div class="cc-license site-overview-item animated" itemprop="license">
    <span class="exturl cc-opacity" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC8="><img src="https://cdn.jsdelivr.net/npm/@creativecommons/vocabulary@2020.11.3/assets/license_badges/big/by_nc_sa.svg" alt="Creative Commons"></span>
  </div>


<div class="cc-license animated" itemprop="sponsor">
  <span class="exturl cc-opacity" title="Deploy with Netlify → https://www.netlify.com" data-url="aHR0cHM6Ly93d3cubmV0bGlmeS5jb20="><img width="80" src="https://www.netlify.com/img/global/badges/netlify-dark.svg" alt="Netlify"></span>
</div>

        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <span class="exturl github-corner" data-url="aHR0cHM6Ly9naXRodWIuY29tL0hlc3Rlckc=" title="Visit my gitHub" aria-label="Visit my gitHub"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></span>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://theme-next.js.org/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%88%9D%E6%8E%A2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="HesterG">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lullaby">
      <meta itemprop="description" content="The world's my Oyster.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Lullaby">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%88%9D%E6%8E%A2/" class="post-title-link" itemprop="url">前端性能优化初探</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-05-20 15:31:21" itemprop="dateCreated datePublished" datetime="2022-05-20T15:31:21Z">2022-05-20</time>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%88%9D%E6%8E%A2/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="前端性能优化初探/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="性能指标测试环境和工具"><a href="#性能指标测试环境和工具" class="headerlink" title="性能指标测试环境和工具"></a>性能指标测试环境和工具</h1><p>性能指标一般通过在实验室中或在实际情况中两种情况来测量:</p>
<ol>
<li><p>实验室中：使用工具在稳定、受控的环境中模拟页面加载<br>实测工具(field tools)例子：</p>
<ul>
<li><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vd2ViL3Rvb2xzL2Nocm9tZS11c2VyLWV4cGVyaWVuY2UtcmVwb3J0">Chrome 用户体验报告<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9wYWdlc3BlZWQud2ViLmRldi8=">PageSpeed Insights 网页速度测量工具<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9zdXBwb3J0Lmdvb2dsZS5jb20vd2VibWFzdGVycy9hbnN3ZXIvOTIwNTUyMA==">搜索控制台（核心 Web 指标报告）<i class="fa fa-external-link-alt"></i></span></li>
<li><a target="_blank" rel="noopener" href="https://github.com/GoogleChrome/web-vitals"><code>web-vitals</code>  JavaScript 库</a></li>
</ul>
</li>
<li><p>在实际情况中：基于真实用户的实际页面加载与页面交互<br>实验室工具(lab tools)例子: </p>
<ul>
<li><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuY2hyb21lLmNvbS9kb2NzL2RldnRvb2xzLw==">Chrome 开发者工具<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vd2ViL3Rvb2xzL2xpZ2h0aG91c2Uv">灯塔<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly93ZWJwYWdldGVzdC5vcmcv">WebPageTest 网页性能测试工具<i class="fa fa-external-link-alt"></i></span></li>
<li>在<span class="exturl" data-url="aHR0cHM6Ly93ZWIuZGV2L3ZpdGFscy1maWVsZC1tZWFzdXJlbWVudC1iZXN0LXByYWN0aWNlcy8=">实测 Web 指标的最佳实践<i class="fa fa-external-link-alt"></i></span>中，推荐使用<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0dvb2dsZUNocm9tZS93ZWItdml0YWxzI2luc3RhbGwtYW5kLWxvYWQtdGhlLWxpYnJhcnk=">web-vitals js库<i class="fa fa-external-link-alt"></i></span>,为了不影响测量官方建议延迟加载分析代码</li>
</ul>
</li>
</ol>
<br />

<h1 id="使用-Chrome开发者工具分析如何进行页面性能优化"><a href="#使用-Chrome开发者工具分析如何进行页面性能优化" class="headerlink" title="使用 Chrome开发者工具分析如何进行页面性能优化"></a>使用 Chrome开发者工具分析如何进行页面性能优化</h1><p>用于分析和测试优化策略的页面：<span class="exturl" data-url="aHR0cHM6Ly90eS5xcS5jb20vYWN0L2EyMDIyMDQwOGxvdHRlcnkvaHVhd2VpL2luZGV4Lmh0bWw=">天刀华为直购活动页面一<i class="fa fa-external-link-alt"></i></span>、<span class="exturl" data-url="aHR0cHM6Ly90eS5xcS5jb20vYWN0L2EyMDIyMDUxNmxvdHRlcnkvdGVzdC9pbmRleC5odG1s">天刀华为直购活动页面二<i class="fa fa-external-link-alt"></i></span><br>这里分为两个阶段：加载阶段和交互阶段，这里主要关注网络进程和渲染进程。</p>
<h2 id="加载阶段"><a href="#加载阶段" class="headerlink" title="加载阶段"></a>加载阶段</h2><p>通过 <code>chrome</code> 的 <code>performance</code> 中的 <code>timing</code> 可以观察到比较重要的几个时间节点:</p>
<ul>
<li><code>First Paint</code>  ：Google定义的web指标(web vitals)之一，首次绘制像素的时间（白屏时间）。</li>
<li><code>First Contentful Paint</code>  ：Google定义的web指标(web vitals)之一，测量页面从开始加载到页面内容的任何部分在屏幕上完成渲染的时间，如文本、图像、非空 <code>svg/canvas</code> 等（首屏时间）。</li>
<li><code>Largest Contentful Paint</code>  : Google定义的核心web指标(core web vitals)之一，测量页面从开始加载到最大文本块或图像元素在屏幕上完成渲染的时间，测量加载性能。从  <code>Screenshots</code>  中看到这个节点是可以看到比较完整的页面的时候，因此从用户体验来说这个时间点会比较重要。</li>
<li><code>DomContentLoaded</code>  事件： <code>dom</code> 树构建完毕，但是还没有进入渲染树的构建。体验上页面可以正常交互了，但是图片、字体等资源可能还没完全加载好。(在 <code>main</code> 上，<code>DCL</code>之后就没有 <code>Parse HTML</code> 了)</li>
<li><code>Load</code>  事件：页面上所有资源都被加载完毕。(  <code>js</code> 、 <code>css</code> 、图片，以及  <code>js</code>  异步加载的  <code>js</code> 、 <code>css</code>  、图片)<br><img src="https://user-images.githubusercontent.com/17645053/168962380-9043016c-ce9e-4c16-a968-c7a3ca92caf1.png" alt="undefined" loading="lazy"></li>
</ul>
<p>如果不想使用<code>web-vitals</code>想自己做埋点，也可以使用performance Windows API来做简易的埋点。看一下<code>performance.timing</code>都有什么:<br><img width="494" alt="Screen Shot 2022-05-20 at 3 15 38 PM" src="https://user-images.githubusercontent.com/17645053/169474053-167baa8c-ab55-4957-809e-bddbfdfad419.png"><br>根据它们可以计算出FP&#x2F;DCL&#x2F;Load等关键事件的时间点</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// 页面首次渲染时间：</span><br><span class="line">FP(firstPaint) = domLoading - navigationStart`</span><br><span class="line">// DOM加载完成</span><br><span class="line">DCL(DOMContentEventLoad) = domContentLoadedEventEnd - navigationStart</span><br><span class="line">// 图片、样式等外链资源加载完成</span><br><span class="line">L(Load) = loadEventEnd - navigationStart</span><br></pre></td></tr></table></figure>

<p>不过这里因为Google Web Vitals更多考虑了用户体验，所以还是使用Web Vitals的时间点来作为阶段的分割线。</p>
<h3 id="beforeunload、发起请求准备阶段"><a href="#beforeunload、发起请求准备阶段" class="headerlink" title="beforeunload、发起请求准备阶段"></a>beforeunload、发起请求准备阶段</h3><p>在发起  <code>get index.html</code>  请求前，有一小段时间是在执行  <code>beforeunload</code>  ，其实应该还包括了发起 <code>get index.html</code> 请求前的准备工作，如果未来需求里需要引入跨域文件，也许可以使用  <code>dns-prefetch</code>  来进行预解析。即预解析之后可能会用到的域名，并将结果缓存到系统缓存中，缩短 <code>DNS</code> 的查询时间，以此来提高访问速度。这里有个误解，之前以为 <code>dns-prefetch</code> 会影响首屏加载，但其实如果使用的是 <code>chrome</code> ， <code>V8</code> 是会利用空闲的时间去做预解析，并且它的预解析是在异步线程上执行的，可以避免影响首屏加载。不过 <code>dns-prefetch</code> 也不是设置得越多越好，虽然是异步线程，也还是占用设备的带宽，可能会造成资源竞争。<br><img src="https://user-images.githubusercontent.com/17645053/168993038-8342cb8f-c81f-49d7-bf9d-8c32d9366d08.png" alt="undefined" loading="lazy"></p>
<h3 id="发起请求到FCP阶段"><a href="#发起请求到FCP阶段" class="headerlink" title="发起请求到FCP阶段"></a>发起请求到FCP阶段</h3><p>在 <code>First Contentful Paint</code> 之前，可以看到优先级高的关键资源会被首先请求，如  <code>index.html</code>  、  <code>index.css</code>  、  <code>index.js</code>  等。</p>
<p><img src="https://user-images.githubusercontent.com/17645053/168964607-d996963f-7b25-41cd-9e2f-aba74d82a95f.png" alt="undefined" loading="lazy"></p>
<p>而关键资源阻塞渲染的时长取决于最大的那个资源，因此猜测这个阶段可以采取利用  <code>webpack</code>  压缩文件、移除非必要的代码等优化方式。</p>
<p>于是实践了一下，使用<code>optimize-css-assets-webpack-plugin</code>压缩<code>css</code>、<code>HtmlWebpackPlugin</code>压缩<code>html</code>，以及<code>webpack</code>生产环境自动开启的js压缩工具测试了一下，结果发现虽然压缩后大小是有所减小（共计缩小了<code>14.9k</code>,为原体积的<code>30%</code>左右），线上<code>network</code>请求时长没什么改善，<code>FCP</code>和<code>LCP</code>也没有有效提前，查看<code>network</code>发现其实这里的速度主要还是取决于<code>TTFB</code>,以<code>get index.js</code>请求为例，大部分时间在<code>Waiting</code>,对于这个项目而言，因为本身文件大小不算大，<code>webpack</code>压缩后并没有起到有效的优化效果。</p>
<img width="1096" alt="Screen Shot 2022-05-20 at 1 30 46 PM" src="https://user-images.githubusercontent.com/17645053/169457346-fa6a9a2b-7f47-429a-8957-308d2cffb31a.png">



<p>另外，浏览器为了更好的用户体验会先解析一部分 <code>html</code> ，所以才有了 <code>firstpaint</code> 在 <code>DomContentLoaded</code> 之前，也因此需要把 <code>js</code> 放到 <code>html</code> 的最下面，因为 <code>js</code> 会阻塞 <code>dom</code> 的解析， <code>css</code> 可以放到前面避免页面因为没有样式过于丑陋。于是觉得理论上也许可以尝试将一些不需要在解析 <code>html</code> 阶段使用的 <code>js</code> 标记上 <code>async</code>  或者  <code>defer</code> 。</p>
<p><a target="_blank" rel="noopener" href="https://web.dev/fcp/"><code>FCP</code> </a>是从开始加载到页面内容的任何部分在屏幕上完成渲染的时间，是 <code>Google</code> 的 <code>web vitals</code> 之一，目前<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0dvb2dsZUNocm9tZS9saWdodGhvdXNl">灯塔<i class="fa fa-external-link-alt"></i></span>、<span class="exturl" data-url="aHR0cHM6Ly9wYWdlc3BlZWQud2ViLmRldi8=">PageSpeed Insights<i class="fa fa-external-link-alt"></i></span>、<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuY2hyb21lLmNvbS9kb2NzL2RldnRvb2xzLw==">Chrome 开发者工具<i class="fa fa-external-link-alt"></i></span>、<span class="exturl" data-url="aHR0cHM6Ly9zZWFyY2guZ29vZ2xlLmNvbS9zZWFyY2gtY29uc29sZS9hYm91dA==">搜索控制台<i class="fa fa-external-link-alt"></i></span>、<span class="exturl" data-url="aHR0cHM6Ly93ZWIuZGV2L21lYXN1cmUv">web.dev 测量工具<i class="fa fa-external-link-alt"></i></span>和<span class="exturl" data-url="aHR0cHM6Ly9jaHJvbWUuZ29vZ2xlLmNvbS93ZWJzdG9yZS9kZXRhaWwvd2ViLXZpdGFscy9haGZoaWpkbGVnZGFiYWJscGlwcGVhZ2doaWdtaWJtYQ==">Web 指标 Chrome 扩展程序<i class="fa fa-external-link-alt"></i></span>等工具都提供对他的支持。可以使用这些工具获取<code>FCP</code>和优化建议。对于缩短<code>FCP</code>, Google也给出了<span class="exturl" data-url="aHR0cHM6Ly93ZWIuZGV2L2ZjcC8jZmNwLTQ=">一些建议<i class="fa fa-external-link-alt"></i></span>。可以根据实际情况分析适用于自己项目的方式来进行优化。</p>
<p>在实际环境中测量 <code>FCP</code> :</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">new PerformanceObserver((entryList) =&gt; &#123;</span><br><span class="line"> &amp;nbsp;for (const entry of entryList.getEntriesByName(&#x27;first-contentful-paint&#x27;)) &#123;</span><br><span class="line"> &amp;nbsp; &amp;nbsp;console.log(&#x27;FCP candidate:&#x27;, entry.startTime, entry);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;).observe(&#123;type: &#x27;paint&#x27;, buffered: true&#125;);</span><br></pre></td></tr></table></figure>

<p>查看一下 <code>web-vitals js</code> 库中<a target="_blank" rel="noopener" href="https://github.com/GoogleChrome/web-vitals/blob/main/src/getFCP.ts"><code>getFCP</code>源码</a></p>
<h3 id="FCP到LCP阶段"><a href="#FCP到LCP阶段" class="headerlink" title="FCP到LCP阶段"></a>FCP到LCP阶段</h3><p>在这个阶段，占用时间比较多有请求图片、字体资源、优先级低的 <code>js</code> 文件。这里用的是  <code>http/2</code>  ，允许同时通过单一的   <code>http/2</code>   连接发起多重的请求-响应消息，减缓了 <code>tcp</code> 竞争以及队头阻塞。之前有个需求用到了雪碧图，经过指点才了解到因为  <code>http/2</code>  的普及现在其实拆成多个小图反而会更快一些，就是因为  <code>http/2</code>  有多路复用的特性，不再需要通过拼接来减少队头阻塞，多个小图可以同时被请求会比较快。除此之外，也了解到有些针对  <code>http1.1</code>  的性能优化也不再适用了，如域名分片(因为不需要新开连接来解决头阻塞问题)和拼接  <code>js/css</code>  (理由同雪碧图)<br>在实际开发过程中，蜘蛛会自动上传  <code>ossweb-img</code>  中的资源到  <code>CDN</code>  , 因此在这一步起到了减少  <code>RTT</code>  时间，优化图片等资源的传输速度的效果。在过去的几个静态页面开发过程中，主要是也是针对这一阶段进行了优化，如压缩图片、压缩字体等。这里想聊一下  <code>font-spider</code>  。他的原理是将页面引用到字体从字体包中拿出来，合成一个新的字体包，这样就不用引入全部字体包中的字体了，实现了按需引入。这里没了解原理之前踩坑了，把一个项目中压缩过的字体包拿到另一个项目用，结果页面中有的字体没有转化过来。因为页面上的字是不一样的，需要按需重新生成新的压缩字体包才可以。<br><img src="https://user-images.githubusercontent.com/17645053/168980701-0c2aa8f3-cd0e-4b82-9b3a-bace85d87577.png" alt="undefined" loading="lazy"><br> <code>LCP</code> 是测量页面从开始加载到最大文本块或图像元素在屏幕上完成渲染的时间。被 <code>Google</code> 列为了 <code>core web vitals</code> 之一，支持它的工具与 <code>FCP</code> 的一致，对于缩短 <code>LCP</code> ，Google官方给出了<span class="exturl" data-url="aHR0cHM6Ly93ZWIuZGV2L29wdGltaXplLWxjcC8=">建议<i class="fa fa-external-link-alt"></i></span></p>
<p>在实际环境中测量 <code>LCP</code> :</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">new PerformanceObserver((entryList) =&gt; &#123;</span><br><span class="line"> &amp;nbsp;for (const entry of entryList.getEntries()) &#123;</span><br><span class="line"> &amp;nbsp; &amp;nbsp;console.log(&#x27;LCP candidate:&#x27;, entry.startTime, entry);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;).observe(&#123;type: &#x27;largest-contentful-paint&#x27;, buffered: true&#125;);</span><br></pre></td></tr></table></figure>

<p>查看一下 <code>web-vitals js</code> 库中<a target="_blank" rel="noopener" href="https://github.com/GoogleChrome/web-vitals/blob/main/src/getLCP.ts"><code>getLCP</code> 源码</a></p>
<h3 id="LCP到Load阶段"><a href="#LCP到Load阶段" class="headerlink" title="LCP到Load阶段"></a>LCP到Load阶段</h3><p>在这个阶段，通过查看  <code>main</code>  发现主要是执行了 <code>milo</code> 的 <code>alert(&quot;活动已经结束&quot;)</code> ，所以可以暂且忽略。但是也验证了异步加载的 <code>js</code> 会影响 <code>load</code> 事件的触发。<br><img src="https://user-images.githubusercontent.com/17645053/168980353-1303ecb6-f426-4938-bf16-d486768119cc.png" alt="undefined" loading="lazy"></p>
<h2 id="交互阶段"><a href="#交互阶段" class="headerlink" title="交互阶段"></a>交互阶段</h2><p>华为这个活动页面交互比较少，主要是点击按钮，触发购买等请求 ，由此可见组件化时尽量排除无用的依赖可以加快响应。例子：<br><img src="https://user-images.githubusercontent.com/17645053/168985752-709ef3a4-acf9-4e73-b3c0-8f53fdf350ed.png" alt="undefined" loading="lazy"><br>未来如果接触到较为复杂的交互功能，理论上应该尽量减少对<code>dom</code>的重排重绘，尽量利用好<code>css</code>合成动画。因为渲染流程包括构建<code>dom</code>树、计算样式、布局、分层、分层、绘制、栅格化、合成和显示等阶段。重排会触发整个渲染流程；重绘会触发绘制后面的一系列渲染流程；而合成就不会再重新触发整个流程或者绘制流程，效率会高很多。对<code>chrome</code>来说，合成是在合成线程上完成的，他不会影响到主线程。因此合理利用合成可以带来较好的用户体验并且提高效率（至少对<code>chrome</code>是这样）</p>
<h1 id="开发体验优化"><a href="#开发体验优化" class="headerlink" title="开发体验优化"></a>开发体验优化</h1><ul>
<li>未来可以就<code>css</code>开发做一些优化，比如使用<code>less/sass</code>等；取名方面可以更加规范一些，比如使用 <code>BEM</code> ；要注意去除多余样式、优化结构。</li>
<li>可以多关注组件库并且参与开发，以此减少对于<code>milo</code>等库的依赖。</li>
<li>也许可以试着引入<code>webpack</code>对代码进行压缩。</li>
<li>另外，在开发过程中需要多注意兼容的问题，避免使用覆盖率低的<code>css</code>或<code>html</code>特性。</li>
</ul>
<p>以上为至今自己在需求中遇到过的性能优化的一些心得体会，未来也希望可以继续学习挖掘更多前端页面性能和开发体验的优化方式。如果有写得不准确的也希望可以多多指正。</p>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ul>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC82ODg3MTA4OTA0NzY2MDQ2MjE2">前端性能监控-基础指标定义&amp;计算<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC82ODQ0OTAzNTAzOTgzMjgwMTQxI2hlYWRpbmctMTI=">HTTP&#x2F;2特性及其在实际应用中的表现<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly90aW1lLmdlZWtiYW5nLm9yZy9jb2x1bW4vYXJ0aWNsZS8xNDE4NDI=">分层和合成机制<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly90aW1lLmdlZWtiYW5nLm9yZy9jb2x1bW4vYXJ0aWNsZS8xNDM4ODk=">如何系统地优化页面<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9zZXJ2ZXJsZXNzLWFjdGlvbi5jb20vZm9udGVuZC9mZS1vcHRpbWl6YXRpb24vRE5TLVByZWZldGNoLmh0bWw=">DNS prefetch原理<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly93ZWIuZGV2L2xlYXJuLXdlYi12aXRhbHMv">web vitals<i class="fa fa-external-link-alt"></i></span></li>
<li>[埋点sdk设计](</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://theme-next.js.org/Serverless%E5%88%9D%E6%8E%A2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="HesterG">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lullaby">
      <meta itemprop="description" content="The world's my Oyster.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Lullaby">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Serverless%E5%88%9D%E6%8E%A2/" class="post-title-link" itemprop="url">Serverless初探</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-08-21 23:26:35" itemprop="dateCreated datePublished" datetime="2020-08-21T23:26:35Z">2020-08-21</time>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/Serverless%E5%88%9D%E6%8E%A2/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="Serverless初探/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><span class="exturl" data-url="aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3RlbmNlbnR5dW4vcWNsb3VkLWRvY3VtZW50cy9tYXN0ZXIvcHJvZHVjdC8lRTglQUUlQTElRTclQUUlOTclRTQlQjglOEUlRTclQkQlOTElRTclQkIlOUMvU2VydmVybGVzcyUyMEZyYW1ld29yay8lRTYlOUMlODAlRTQlQkQlQjMlRTUlQUUlOUUlRTglQjclQjUvJUU1JUJGJUFCJUU5JTgwJTlGJUU5JTgzJUE4JUU3JUJEJUIyJTIwSGV4byVFNSU4RCU5QSVFNSVBRSVBMi5tZA==">Reference from 腾讯云<i class="fa fa-external-link-alt"></i></span></p>
<p>可用于迭代目前的个人主页</p>
<h2 id="操作场景"><a href="#操作场景" class="headerlink" title="操作场景"></a>操作场景</h2><p>该任务指导您通过 Serverless Website 组件，快速构建一个 Serverless Hexo 站点。 </p>
<h2 id="前提条件"><a href="#前提条件" class="headerlink" title="前提条件"></a>前提条件</h2><ul>
<li>已安装 <span class="exturl" data-url="aHR0cHM6Ly9ub2RlanMub3JnL2VuLw==">Node.js<i class="fa fa-external-link-alt"></i></span>（Node.js 版本需不低于8.6，建议使用 Node.js10.0 及以上版本）</li>
<li>已安装 <span class="exturl" data-url="aHR0cHM6Ly9naXQtc2NtLmNvbS8=">Git<i class="fa fa-external-link-alt"></i></span></li>
</ul>
<p>如您未安装上述应用程序，可以参考 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlvL3poLWNuL2RvY3Mv">Hexo 安装说明<i class="fa fa-external-link-alt"></i></span>。</p>
<h2 id="操作步骤"><a href="#操作步骤" class="headerlink" title="操作步骤"></a>操作步骤</h2><h3 id="1-安装"><a href="#1-安装" class="headerlink" title="1. 安装"></a>1. 安装</h3><p>通过 npm 安装 Serverless Framework：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ npm install -g serverless</span><br></pre></td></tr></table></figure>

<p>通过 npm 安装 Hexo：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ npm install -g hexo-cli</span><br></pre></td></tr></table></figure>

<p>安装 Hexo 完成后，请执行下列命令，Hexo 将会在指定文件夹中新建所需要的文件。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ hexo init hexo   # 生成 Hexo 目录</span><br><span class="line">$ cd hexo</span><br><span class="line">$ npm install</span><br></pre></td></tr></table></figure>

<p>新建完成后，指定文件夹的目录如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.</span><br><span class="line">├── _config.yml</span><br><span class="line">├── package.json</span><br><span class="line">├── scaffolds</span><br><span class="line">├── source</span><br><span class="line">|   ├── _drafts</span><br><span class="line">|   └── _posts</span><br><span class="line">└── themes</span><br></pre></td></tr></table></figure>

<p>安装完成后，可以通过<code>hexo g</code>命令生成静态页面：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ hexo g   # generate</span><br></pre></td></tr></table></figure>

<blockquote>
<p>?如果希望在本地查看效果，也可以运行下列命令，通过浏览器访问 <code>localhost:4000</code> 查看页面效果。</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ hexo s   # server</span><br></pre></td></tr></table></figure>

<h3 id="2-配置"><a href="#2-配置" class="headerlink" title="2. 配置"></a>2. 配置</h3><p>在<code>hexo</code>目录下，创建<code>serverless.yml</code>文件：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ touch serverless.yml</span><br></pre></td></tr></table></figure>
<p>在<code>serverless.yml</code>文件中进行如下配置：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># serverless.yml</span></span><br><span class="line"></span><br><span class="line"><span class="attr">component:</span> <span class="string">website</span> <span class="comment"># (必填) 引用 component 的名称，当前用到的是 tencent-website 组件</span></span><br><span class="line"><span class="attr">name:</span> <span class="string">hexodemo</span> <span class="comment"># (必填) 该 website 组件创建的实例名称</span></span><br><span class="line"><span class="attr">org:</span> <span class="string">test</span> <span class="comment"># (可选) 用于记录组织信息，默认值为您的腾讯云账号 APPID</span></span><br><span class="line"><span class="attr">app:</span> <span class="string">websiteApp</span> <span class="comment"># (可选) 该 website 应用名称</span></span><br><span class="line"><span class="attr">stage:</span> <span class="string">dev</span> <span class="comment"># (可选) 用于区分环境信息，默认值是 dev</span></span><br><span class="line"></span><br><span class="line"><span class="attr">inputs:</span></span><br><span class="line">  <span class="attr">src:</span></span><br><span class="line">    <span class="attr">src:</span> <span class="string">./public</span> <span class="comment"># Upload static files generated by HEXO</span></span><br><span class="line">    <span class="attr">index:</span> <span class="string">index.html</span></span><br><span class="line">    <span class="comment"># dist: ./dist</span></span><br><span class="line">    <span class="comment"># hook: npm run build</span></span><br><span class="line">    <span class="comment"># websitePath: ./</span></span><br><span class="line">  <span class="attr">region:</span> <span class="string">ap-guangzhou</span></span><br><span class="line">  <span class="attr">bucketName:</span> <span class="string">my-bucket</span></span><br><span class="line">  <span class="attr">protocol:</span> <span class="string">https</span></span><br><span class="line">  </span><br></pre></td></tr></table></figure>

<p>配置完成后，文件目录如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.</span><br><span class="line">├── .serverless</span><br><span class="line">└── hexo</span><br><span class="line">    ├── public</span><br><span class="line">    ├── ...</span><br><span class="line">    ├── serverless.yml </span><br><span class="line">    ├── ...</span><br><span class="line">    └── source</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="3-部署"><a href="#3-部署" class="headerlink" title="3. 部署"></a>3. 部署</h3><p>通过<code>sls deploy</code>命令进行部署，并可以添加<code>--debug</code>参数查看部署过程中的信息。<br>如您的账号未 <span class="exturl" data-url="aHR0cHM6Ly9jbG91ZC50ZW5jZW50LmNvbS9sb2dpbg==">登录<i class="fa fa-external-link-alt"></i></span> 或 <span class="exturl" data-url="aHR0cHM6Ly9jbG91ZC50ZW5jZW50LmNvbS9yZWdpc3Rlcg==">注册<i class="fa fa-external-link-alt"></i></span> 腾讯云，您可以直接通过<strong>微信</strong>扫描命令行中的二维码进行授权登录和注册。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ sls deploy</span><br><span class="line"></span><br><span class="line">serverless ⚡ framework</span><br><span class="line">Action: &quot;deploy&quot; - Stage: &quot;dev&quot; - App: &quot;websiteApp&quot; - Instance: &quot;hexodemo&quot;</span><br><span class="line"></span><br><span class="line">region:  ap-guangzhou</span><br><span class="line">website: https://my-bucket-1258834142.cos-website.ap-guangzhou.myqcloud.com</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">25s › hexodemo › Success</span><br></pre></td></tr></table></figure>

<p>访问命令行输出的 Website URL，即可查看您的 Serverless Hexo 站点。</p>
<blockquote>
<p>!如果希望更新 Hexo 站点中的文章，需要在本地重新运行<code>hexo g</code>进行生成静态页面，再运行<code>serverless</code>更新到页面。</p>
</blockquote>
<h3 id="4-移除"><a href="#4-移除" class="headerlink" title="4. 移除"></a>4. 移除</h3><p>通过以下命令移除 Hexo 网站：</p>
<figure class="highlight console"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sls remove --debug</span></span><br><span class="line"></span><br><span class="line">  DEBUG ─ Flushing template state and removing all components.</span><br><span class="line">  DEBUG ─ Starting Website Removal.</span><br><span class="line">  DEBUG ─ Removing Website bucket.</span><br><span class="line">  DEBUG ─ Removing files from the &quot;my-bucket-1250000000&quot; bucket.</span><br><span class="line">  DEBUG ─ Removing &quot;my-bucket-1250000000&quot; bucket from the &quot;ap-guangzhou&quot; region.</span><br><span class="line">  DEBUG ─ &quot;my-bucket-1250000000&quot; bucket was successfully removed from the &quot;ap-guangzhou&quot; region.</span><br><span class="line">  DEBUG ─ Finished Website Removal.</span><br><span class="line"></span><br><span class="line">  6s » myWebsite » done</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="账号配置（可选）"><a href="#账号配置（可选）" class="headerlink" title="账号配置（可选）"></a>账号配置（可选）</h3><p>当前默认支持 CLI 扫描二维码登录，如您希望配置持久的环境变量&#x2F;密钥信息，也可以本地创建 <code>.env</code> 文件：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ touch .env # 腾讯云的配置信息</span><br></pre></td></tr></table></figure>

<p>在 <code>.env</code> 文件中配置腾讯云的 SecretId 和 SecretKey 信息并保存：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># .env</span><br><span class="line">TENCENT_SECRET_ID=123</span><br><span class="line">TENCENT_SECRET_KEY=123</span><br></pre></td></tr></table></figure>
<blockquote>
<p>?</p>
<ul>
<li>如果没有腾讯云账号，请先 <span class="exturl" data-url="aHR0cHM6Ly9jbG91ZC50ZW5jZW50LmNvbS9yZWdpc3Rlcg==">注册新账号<i class="fa fa-external-link-alt"></i></span>。</li>
<li>如果已有腾讯云账号，可以在 <span class="exturl" data-url="aHR0cHM6Ly9jb25zb2xlLmNsb3VkLnRlbmNlbnQuY29tL2NhbS9jYXBp">API 密钥管理<i class="fa fa-external-link-alt"></i></span> 中获取 SecretId 和 SecretKey。</li>
</ul>
</blockquote>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://theme-next.js.org/LC28/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="HesterG">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lullaby">
      <meta itemprop="description" content="The world's my Oyster.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Lullaby">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/LC28/" class="post-title-link" itemprop="url">LC28</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-02-24 09:43:15" itemprop="dateCreated datePublished" datetime="2020-02-24T09:43:15Z">2020-02-24</time>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/LC28/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="LC28/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="LC-28-Implement-strStr"><a href="#LC-28-Implement-strStr" class="headerlink" title="LC 28 Implement strStr()"></a>LC 28 Implement strStr()</h2><h3 id="Q"><a href="#Q" class="headerlink" title="Q"></a>Q</h3><p>Implement <span class="exturl" data-url="aHR0cDovL3d3dy5jcGx1c3BsdXMuY29tL3JlZmVyZW5jZS9jc3RyaW5nL3N0cnN0ci8=">strStr()<i class="fa fa-external-link-alt"></i></span>.</p>
<p>Return the index of the first occurrence of needle in haystack, or <strong>-1</strong> if needle is not part of haystack.</p>
<p><strong>Example 1:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: haystack = &quot;hello&quot;, needle = &quot;ll&quot;</span><br><span class="line">Output: 2</span><br></pre></td></tr></table></figure>

<p><strong>Example 2:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: haystack = &quot;aaaaa&quot;, needle = &quot;bba&quot;</span><br><span class="line">Output: -1</span><br></pre></td></tr></table></figure>

<p><strong>Clarification:</strong></p>
<p>What should we return when <code>needle</code> is an empty string? This is a great question to ask during an interview.</p>
<p>For the purpose of this problem, we will return 0 when <code>needle</code> is an empty string. This is consistent to C&#39;s <span class="exturl" data-url="aHR0cDovL3d3dy5jcGx1c3BsdXMuY29tL3JlZmVyZW5jZS9jc3RyaW5nL3N0cnN0ci8=">strstr()<i class="fa fa-external-link-alt"></i></span> and Java&#39;s <span class="exturl" data-url="aHR0cHM6Ly9kb2NzLm9yYWNsZS5jb20vamF2YXNlLzcvZG9jcy9hcGkvamF2YS9sYW5nL1N0cmluZy5odG1sI2luZGV4T2YoamF2YS5sYW5nLlN0cmluZyk=">indexOf()<i class="fa fa-external-link-alt"></i></span>.</p>
<h3 id="A"><a href="#A" class="headerlink" title="A"></a>A</h3><p>使用哈希值</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">strStr</span>(<span class="params">self, haystack: <span class="built_in">str</span>, needle: <span class="built_in">str</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">    L, n = <span class="built_in">len</span>(needle), <span class="built_in">len</span>(haystack)</span><br><span class="line">    <span class="keyword">if</span> L &gt; n:</span><br><span class="line">        <span class="keyword">return</span> - <span class="number">1</span></span><br><span class="line"><span class="comment"># base value for the rolling hash function</span></span><br><span class="line">a = <span class="number">26</span></span><br><span class="line"><span class="comment"># modulus value for the rolling hash function to avoid overflow</span></span><br><span class="line">modulus = <span class="number">2</span>**<span class="number">31</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># lambda-function to convert character to integer</span></span><br><span class="line">h_to_int = <span class="keyword">lambda</span> i : <span class="built_in">ord</span>(haystack[i]) - <span class="built_in">ord</span>(<span class="string">&#x27;a&#x27;</span>)</span><br><span class="line">needle_to_int = <span class="keyword">lambda</span> i : <span class="built_in">ord</span>(needle[i]) - <span class="built_in">ord</span>(<span class="string">&#x27;a&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># compute the hash of strings haystack[:L], needle[:L]</span></span><br><span class="line">h = ref_h = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(L):</span><br><span class="line">    h = (h * a + h_to_int(i)) % modulus</span><br><span class="line">    ref_h = (ref_h * a + needle_to_int(i)) % modulus</span><br><span class="line"><span class="keyword">if</span> h == ref_h:</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">      </span><br><span class="line"><span class="comment"># const value to be used often : a**L % modulus</span></span><br><span class="line">aL = <span class="built_in">pow</span>(a, L, modulus) </span><br><span class="line"><span class="keyword">for</span> start <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, n - L + <span class="number">1</span>):</span><br><span class="line">    <span class="comment"># compute rolling hash in O(1) time</span></span><br><span class="line">    h = (h * a - h_to_int(start - <span class="number">1</span>) * aL + h_to_int(start + L - <span class="number">1</span>)) % modulus</span><br><span class="line">    <span class="keyword">if</span> h == ref_h:</span><br><span class="line">        <span class="keyword">return</span> start</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> -<span class="number">1</span></span><br></pre></td></tr></table></figure>



      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://theme-next.js.org/Kubernetes-Review/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="HesterG">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lullaby">
      <meta itemprop="description" content="The world's my Oyster.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Lullaby">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Kubernetes-Review/" class="post-title-link" itemprop="url">Kubernetes Review</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-02-23 10:01:00" itemprop="dateCreated datePublished" datetime="2020-02-23T10:01:00Z">2020-02-23</time>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/Kubernetes-Review/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="Kubernetes-Review/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <link rel="stylesheet" href="css/welcomePage.css"><script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>



<p><span class="exturl" data-url="aHR0cHM6Ly93d3cueW91dHViZS5jb20vY2hhbm5lbC9VQ2RrR1Y1MU51MHVuRE5UNThiSHQ5Ymc=">Study Source<i class="fa fa-external-link-alt"></i></span></p>
<p><img src="https://user-images.githubusercontent.com/17645053/75114786-11c41d80-5627-11ea-9e03-009bda02ad1b.png" alt="Quick General Intro" loading="lazy"></p>
<p><img src="https://user-images.githubusercontent.com/17645053/75114532-b85aef00-5624-11ea-9a9a-3f2a70ed5728.png" alt="Kubernetes" loading="lazy"></p>
<p><strong>Master</strong></p>
<p><strong>1 etcd</strong> is a persistent, lightweight, distributed, key-value data store developed by <span class="exturl" data-url="aHR0cHM6Ly93d3cud2lraXdhbmQuY29tL2VuL0NvcmVPUw==">CoreOS<i class="fa fa-external-link-alt"></i></span> that reliably stores the configuration data of the cluster, representing the overall state of the cluster at any given point of time. Other components watch for changes to this store to bring themselves into the desired state</p>
<p>Hold all metadata?</p>
<p><strong>2 API server</strong> is a key component and serves the Kubernetes <span class="exturl" data-url="aHR0cHM6Ly93d3cud2lraXdhbmQuY29tL2VuL0FwcGxpY2F0aW9uX3Byb2dyYW1taW5nX2ludGVyZmFjZQ==">API<i class="fa fa-external-link-alt"></i></span> using <span class="exturl" data-url="aHR0cHM6Ly93d3cud2lraXdhbmQuY29tL2VuL0pTT04=">JSON<i class="fa fa-external-link-alt"></i></span> over <span class="exturl" data-url="aHR0cHM6Ly93d3cud2lraXdhbmQuY29tL2VuL0h5cGVydGV4dF9UcmFuc2Zlcl9Qcm90b2NvbA==">HTTP<i class="fa fa-external-link-alt"></i></span>, which provides both the internal and external interface to Kubernetes.[<span class="exturl" data-url="aHR0cHM6Ly93d3cud2lraXdhbmQuY29tL2VuL0t1YmVybmV0ZXMjY2l0ZW5vdGVkb2ludHJvMjU=">25]<i class="fa fa-external-link-alt"></i></span>[<span class="exturl" data-url="aHR0cHM6Ly93d3cud2lraXdhbmQuY29tL2VuL0t1YmVybmV0ZXMjY2l0ZW5vdGUxMzQ=">34]<i class="fa fa-external-link-alt"></i></span> The API server processes and validates <span class="exturl" data-url="aHR0cHM6Ly93d3cud2lraXdhbmQuY29tL2VuL1JlcHJlc2VudGF0aW9uYWxfc3RhdGVfdHJhbnNmZXI=">REST<i class="fa fa-external-link-alt"></i></span> requests and updates state of the <span class="exturl" data-url="aHR0cHM6Ly93d3cud2lraXdhbmQuY29tL2VuL0FwcGxpY2F0aW9uX3Byb2dyYW1taW5nX2ludGVyZmFjZQ==">API<i class="fa fa-external-link-alt"></i></span> objects in <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2NvcmVvcy9ldGNk">etcd<i class="fa fa-external-link-alt"></i></span>, thereby allowing clients to configure workloads and containers across Worker nodes.</p>
<p>Commands?</p>
<p><strong>3 Scheduler</strong> is the pluggable component that selects which node an unscheduled pod (the basic entity managed by the scheduler) should run on based on resource availability. Scheduler tracks resource utilization on each node to ensure that workload is not scheduled in excess of the available resources. For this purpose, the scheduler must know the resource requirements, resource availability and a variety of other user-provided constraints and policy directives such as quality-of-service, affinity&#x2F;anti-affinity requirements, data locality and so on. In essence, the scheduler’s role is to match resource &quot;supply&quot; to workload &quot;demand&quot;. </p>
<p>Detection?</p>
<p><strong>4 Controller manager</strong> is the process in which the core Kubernetes controllers like DaemonSet Controller and Replication Controller run. The controllers communicate with the API server to create, update and delete the resources they manage (pods, service endpoints, etc.)</p>
<p>The one who gives the commands?</p>
<p><strong>Node&#x2F;Worker&#x2F;Minion</strong></p>
<p><strong>Kubelet</strong> is responsible for the running state of each node, ensuring that all containers on the node are healthy. It takes care of starting, stopping, and maintaining application containers organized into pods as directed by the control plane.[<span class="exturl" data-url="aHR0cHM6Ly93d3cud2lraXdhbmQuY29tL2VuL0t1YmVybmV0ZXMjY2l0ZW5vdGVkb2ludHJvMjU=">25]<i class="fa fa-external-link-alt"></i></span>[<span class="exturl" data-url="aHR0cHM6Ly93d3cud2lraXdhbmQuY29tL2VuL0t1YmVybmV0ZXMjY2l0ZW5vdGUzNg==">36]<i class="fa fa-external-link-alt"></i></span></p>
<p>Kubelet monitors the state of a pod and if not in the desired state, the pod will be redeployed to the same node. The node status is relayed every few seconds via heartbeat messages to the master. Once the master detects a node failure, the Replication Controller observes this state change and launches pods on other healthy nodes.</p>
<p><strong>Container</strong> resides inside a Pod. The container is the lowest level of a micro-service which holds the running application, the libraries and their dependencies. Containers can be exposed to the world through an external IP address.</p>
<p><strong>Kube-proxy</strong> is an implementation of a <span class="exturl" data-url="aHR0cHM6Ly93d3cud2lraXdhbmQuY29tL2VuL1Byb3h5X3NlcnZlcg==">network proxy<i class="fa fa-external-link-alt"></i></span> and a <span class="exturl" data-url="aHR0cHM6Ly93d3cud2lraXdhbmQuY29tL2VuL0xvYWRfYmFsYW5jaW5nXyhjb21wdXRpbmcp">load balancer<i class="fa fa-external-link-alt"></i></span>, and it supports the service abstraction along with other networking operation.[<span class="exturl" data-url="aHR0cHM6Ly93d3cud2lraXdhbmQuY29tL2VuL0t1YmVybmV0ZXMjY2l0ZW5vdGVkb2ludHJvMjU=">25]<i class="fa fa-external-link-alt"></i></span> It is responsible for routing traffic to the appropriate container based on IP and port number of the incoming request</p>
<ul>
<li>A <a target="_blank" rel="noopener" href="https://www.nginx.com/resources/glossary/reverse-proxy-server"><strong>reverse proxy</strong></a> accepts a request from a client, forwards it to a server that     can fulfill it, and returns the server’s response to the client.</li>
<li>A <a target="_blank" rel="noopener" href="https://www.nginx.com/resources/glossary/load-balancing"><strong>load balancer</strong></a> distributes incoming client requests among a group of servers,     in each case returning the response from the selected server to the     appropriate client.</li>
</ul>
<p><strong>cAdvisor</strong> is an agent that monitors and gathers resource usage and performance metrics such as CPU, memory, file and network usage of containers on each node.</p>
<p><img src="https://user-images.githubusercontent.com/17645053/75114543-cf014600-5624-11ea-970c-028f5543f3c2.png" alt="337641-20160121153024500-830400402" loading="lazy"></p>
<p><img src="https://user-images.githubusercontent.com/17645053/75114548-d6c0ea80-5624-11ea-9796-5343e0fcf4e4.png" alt="337641-20160121153025562-961251045" loading="lazy"></p>
<p><img src="https://user-images.githubusercontent.com/17645053/75114561-f5bf7c80-5624-11ea-8266-550e7c3209d4.png" alt="337641-20160121153022422-1270227504" loading="lazy"></p>
<p>在分布式系统中，部署，调度，伸缩一直是最为重要的也最为基础的功能。Kubernets 就是希望解决这一序列问题的。</p>
<p><span class="exturl" data-url="aHR0cHM6Ly95ZWFzeS5naXRib29rcy5pby9kb2NrZXJfcHJhY3RpY2UvY29udGVudC9rdWJlcm5ldGVzL3F1aWNrc3RhcnQuaHRtbA==">https://yeasy.gitbooks.io/docker_practice/content/kubernetes/quickstart.html<i class="fa fa-external-link-alt"></i></span></p>
<p><strong>快速上手</strong></p>
<p>目前，Kubenetes 支持在多种环境下的安装，包括本地主机（Fedora）、云服务（Google GAE、AWS 等）。然而最快速体验 Kubernetes 的方式显然是本地通过 Docker 的方式来启动相关进程。</p>
<p>下图展示了在单节点使用 Docker 快速部署一套 Kubernetes 的拓扑。</p>
<p><img src="https://user-images.githubusercontent.com/17645053/75114565-03750200-5625-11ea-84be-574cb0dc521c.png" alt="k8s-singlenode-docker" loading="lazy"></p>
<p>图 1.21.2.1 - 在 Docker 中启动 Kubernetes</p>
<p><strong>Kubernetes依赖Etcd服务来维护所有主节点的状态。</strong></p>
<p><strong>启动Etcd服务。</strong></p>
<p>docker run --net&#x3D;host -d gcr.io&#x2F;google_containers&#x2F;etcd:2.0.9 &#x2F;usr&#x2F;local&#x2F;bin&#x2F;etcd --addr&#x3D;127.0.0.1:4001 --bind-addr&#x3D;0.0.0.0:4001 --data-dir&#x3D;&#x2F;var&#x2F;etcd&#x2F;data</p>
<p><strong>启动主节点</strong></p>
<p>启动kubelet。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">docker run --net=host -d -v /var/run/docker.sock:/var/run/docker.sock gcr.io/google_containers/hyperkube:v0.17.0 /hyperkube kubelet --api_servers=http://localhost:8080 --v=2 --address=0.0.0.0 --enable_server --hostname_override=127.0.0.1 --config=/etc/kubernetes/manifests</span><br></pre></td></tr></table></figure>

<p><strong>启动服务代理</strong></p>
<p>docker run -d --net&#x3D;host --privileged gcr.io&#x2F;google_containers&#x2F;hyperkube:v0.17.0 &#x2F;hyperkube proxy --master&#x3D;<span class="exturl" data-url="aHR0cDovLzEyNy4wLjAuMTo4MDgwLw==">http://127.0.0.1:8080<i class="fa fa-external-link-alt"></i></span> --v&#x3D;2</p>
<p><strong>测试状态</strong></p>
<p>在本地访问 8080 端口，可以获取到如下的结果：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ curl 127.0.0.1:8080</span><br><span class="line"> &#123;</span><br><span class="line">  <span class="string">&quot;paths&quot;</span>: [</span><br><span class="line">   <span class="string">&quot;/api&quot;</span>,</span><br><span class="line">   <span class="string">&quot;/api/v1beta1&quot;</span>,</span><br><span class="line">   <span class="string">&quot;/api/v1beta2&quot;</span>,</span><br><span class="line">   <span class="string">&quot;/api/v1beta3&quot;</span>,</span><br><span class="line">   <span class="string">&quot;/healthz&quot;</span>,</span><br><span class="line">   <span class="string">&quot;/healthz/ping&quot;</span>,</span><br><span class="line">   <span class="string">&quot;/logs/&quot;</span>,</span><br><span class="line">   <span class="string">&quot;/metrics&quot;</span>,</span><br><span class="line">   <span class="string">&quot;/static/&quot;</span>,</span><br><span class="line">   <span class="string">&quot;/swagger-ui/&quot;</span>,</span><br><span class="line">   <span class="string">&quot;/swaggerapi/&quot;</span>,</span><br><span class="line">   <span class="string">&quot;/validate&quot;</span>,</span><br><span class="line">   <span class="string">&quot;/version&quot;</span></span><br><span class="line">  ]</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>



<p><strong>查看服务</strong></p>
<p>所有服务启动后，查看本地实际运行的 Docker 容器，有如下几个。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">CONTAINER ID    IMAGE                    COMMAND        CREATED       STATUS       PORTS        NAMES</span><br><span class="line"> ee054db2516c    gcr.io/google_containers/hyperkube:v0.17.0  &quot;/hyperkube schedule  2 days ago     Up 1 days                k8s_scheduler.509f29c9_k8s-master-127.0.0.1_default_9941e5170b4365bd4aa91f122ba0c061_e97037f5</span><br><span class="line"> 3b0f28de07a2    gcr.io/google_containers/hyperkube:v0.17.0  &quot;/hyperkube apiserve  2 days ago     Up 1 days                k8s_apiserver.245e44fa_k8s-master-127.0.0.1_default_9941e5170b4365bd4aa91f122ba0c061_6ab5c23d</span><br><span class="line"> 2eaa44ecdd8e    gcr.io/google_containers/hyperkube:v0.17.0  &quot;/hyperkube controll  2 days ago     Up 1 days                k8s_controller-manager.33f83d43_k8s-master-127.0.0.1_default_9941e5170b4365bd4aa91f122ba0c061_1a60106f</span><br><span class="line"> 30aa7163cbef    gcr.io/google_containers/hyperkube:v0.17.0  &quot;/hyperkube proxy --  2 days ago     Up 1 days                jolly_davinci</span><br><span class="line"> a2f282976d91    gcr.io/google_containers/pause:0.8.0     &quot;/pause&quot;        2 days ago     Up 2 days                k8s_POD.e4cc795_k8s-master-127.0.0.1_default_9941e5170b4365bd4aa91f122ba0c061_e8085b1f</span><br><span class="line"> c060c52acc36    gcr.io/google_containers/hyperkube:v0.17.0  &quot;/hyperkube kubelet  2 days ago     Up 1 days                serene_nobel</span><br><span class="line"> cc3cd263c581    gcr.io/google_containers/etcd:2.0.9     &quot;/usr/local/bin/etcd  2 days ago     Up 1 days                happy_turing</span><br></pre></td></tr></table></figure>



<p>这些服务大概分为三类：主节点服务、工作节点服务和其它服务。</p>
<p><strong>主节点服务</strong></p>
<ul>
<li>apiserver 是整个系统的对外接口，提供     RESTful 方式供客户端和其它组件调用；</li>
<li>scheduler 负责对资源进行调度，分配某个     pod 到某个节点上；</li>
<li>controller-manager 负责管理控制器，包括 endpoint-controller（刷新服务和 pod 的关联信息）和 replication-controller（维护某个     pod 的复制为配置的数值）。</li>
</ul>
<p><strong>工作节点服务</strong></p>
<ul>
<li>kubelet 是工作节点执行操作的     agent，负责具体的容器生命周期管理，根据从数据库中获取的信息来管理容器，并上报 pod 运行状态等；</li>
<li>proxy 为 pod 上的服务提供访问的代理。</li>
</ul>
<p><strong>其它服务</strong></p>
<ul>
<li>Etcd 是所有状态的存储数据库；</li>
<li>gcr.io&#x2F;google_containers&#x2F;pause:0.8.0 是 Kubernetes 启动后自动 pull 下来的测试镜像。</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>





</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 2014 – 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">NexT</span>
</div>
  <div class="powered-by">Powered by <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & <a href="https://theme-next.js.org/">NexT.Gemini</a>
  </div><div class="footer-custom">
Website source code <span class="exturl theme-link" data-url="aHR0cHM6Ly9naXRodWIuY29tL2hleG8tbmV4dC9oZXhvLW5leHQuZ2l0aHViLmlv">here</span>
</div>


    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@next-theme/pjax@0.5.0/pjax.min.js" integrity="sha256-3NkoLDrmHLTYj7csHIZSr0MHAFTXth7Ua/DDt4MRUAg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.11.1/source/js/comments.min.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.11.1/source/js/utils.min.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.11.1/source/js/motion.min.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.11.1/source/js/next-boot.min.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.11.1/source/js/pjax.min.js"></script>

  
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.11.1/source/js/third-party/search/local-search.min.js"></script>


  <script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"default","dark":"dark"},"js":{"url":"https://cdn.jsdelivr.net/npm/mermaid@9.0.1/dist/mermaid.min.js","integrity":"sha256-CemUs9ITT7liCZpVMktcEw0BpAOZ1+mujlMB3UyuImU="}}</script>
  <script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.11.1/source/js/third-party/tags/mermaid.min.js"></script>



  




  

  <script class="next-config" data-name="enableMath" type="application/json">false</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"ams","js":{"url":"https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js","integrity":"sha256-r+3itOMtGGjap0x+10hu6jW/gZCzxHsoKrOd7gyRSGY="}}</script>
<script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.11.1/source/js/third-party/math/mathjax.min.js"></script>


<script class="next-config" data-name="disqus" type="application/json">{"enable":true,"shortname":"next-theme","count":true,"i18n":{"disqus":"disqus"}}</script>
<script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.11.1/source/js/third-party/comments/disqus.min.js"></script>

</body>
</html>
