<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 6.1.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="5AUIVYTbHIAuz-eQtxSfZbWW5eg9_EVZMSQycIuXrG0">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.loli.net/css?family=Lato:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"theme-next.js.org","root":"/","images":"/images","scheme":"Gemini","darkmode":true,"version":"8.11.1","exturl":true,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":true,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":true,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":true,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.json","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.11.1/source/js/config.min.js"></script>

    <meta name="description" content="Study Source">
<meta property="og:type" content="article">
<meta property="og:title" content="Kubernetes Review">
<meta property="og:url" content="https://theme-next.js.org/kubernetes-review/index.html">
<meta property="og:site_name" content="Lullaby">
<meta property="og:description" content="Study Source">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://user-images.githubusercontent.com/17645053/75114786-11c41d80-5627-11ea-9e03-009bda02ad1b.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/17645053/75114532-b85aef00-5624-11ea-9a9a-3f2a70ed5728.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/17645053/75114543-cf014600-5624-11ea-970c-028f5543f3c2.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/17645053/75114548-d6c0ea80-5624-11ea-9796-5343e0fcf4e4.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/17645053/75114561-f5bf7c80-5624-11ea-8266-550e7c3209d4.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/17645053/75114565-03750200-5625-11ea-84be-574cb0dc521c.png">
<meta property="article:published_time" content="2020-02-23T10:01:00.000Z">
<meta property="article:modified_time" content="2022-05-22T09:03:05.736Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="Kubernetes">
<meta property="article:tag" content="Tech Study">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://user-images.githubusercontent.com/17645053/75114786-11c41d80-5627-11ea-9e03-009bda02ad1b.png">


<link rel="canonical" href="https://theme-next.js.org/kubernetes-review/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://theme-next.js.org/kubernetes-review/","path":"kubernetes-review/","title":"Kubernetes Review"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Kubernetes Review | Lullaby</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-108155018-3"></script>
  <script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"UA-108155018-3","only_pageview":false}</script>
  <script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.11.1/source/js/third-party/analytics/google-analytics.min.js"></script>





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="Lullaby" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Lullaby</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Hester's Personal Website</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-bell fa-fw"></i>Home</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives<span class="badge">8</span></a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="HesterG"
      src="/images/avatar.jpeg">
  <p class="site-author-name" itemprop="name">HesterG</p>
  <div class="site-description" itemprop="description">The world's my Oyster.</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">8</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0hlc3Rlckc=" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;HesterG"><i class="fab fa-github fa-fw"></i></span>
      </span>
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly93d3cubGlua2VkaW4uY29tL2luL3hpbnlpLWdvbmctN2E1MzIwMTI1Lw==" title="Linkedin → https:&#x2F;&#x2F;www.linkedin.com&#x2F;in&#x2F;xinyi-gong-7a5320125&#x2F;"><i class="fab fa-linkedin fa-fw"></i></span>
      </span>
  </div>
  <div class="cc-license site-overview-item animated" itemprop="license">
    <span class="exturl cc-opacity" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC8="><img src="https://cdn.jsdelivr.net/npm/@creativecommons/vocabulary@2020.11.3/assets/license_badges/big/by_nc_sa.svg" alt="Creative Commons"></span>
  </div>


  <div class="links-of-blogroll site-overview-item animated">
    <div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i>
      My Fav Links lately
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <span class="exturl" data-url="aHR0cHM6Ly90aW1lLmdlZWtiYW5nLm9yZy9jb2x1bW4vaW50cm8vMTAwMDQ4MDAxP3RhYj1jYXRhbG9n" title="https:&#x2F;&#x2F;time.geekbang.org&#x2F;column&#x2F;intro&#x2F;100048001?tab&#x3D;catalog">Cool V8 Reading</span>
        </li>
    </ul>
  </div>
<div class="cc-license animated" itemprop="sponsor">
  <span class="exturl cc-opacity" title="Deploy with Netlify → https://www.netlify.com" data-url="aHR0cHM6Ly93d3cubmV0bGlmeS5jb20="><img width="80" src="https://www.netlify.com/img/global/badges/netlify-dark.svg" alt="Netlify"></span>
</div>

        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

  <span class="exturl github-corner" data-url="aHR0cHM6Ly9naXRodWIuY29tL0hlc3Rlckc=" title="Visit my gitHub" aria-label="Visit my gitHub"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></span>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://theme-next.js.org/kubernetes-review/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="HesterG">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lullaby">
      <meta itemprop="description" content="The world's my Oyster.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Kubernetes Review | Lullaby">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Kubernetes Review
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-02-23 10:01:00" itemprop="dateCreated datePublished" datetime="2020-02-23T10:01:00Z">2020-02-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Tech/" itemprop="url" rel="index"><span itemprop="name">Tech</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Tech/Kubernetes/" itemprop="url" rel="index"><span itemprop="name">Kubernetes</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/kubernetes-review/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="kubernetes-review/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <link rel="stylesheet" href="css/welcomePage.css"><script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>

<div class="note no-icon"><p><span class="exturl" data-url="aHR0cHM6Ly93d3cueW91dHViZS5jb20vY2hhbm5lbC9VQ2RrR1Y1MU51MHVuRE5UNThiSHQ5Ymc=">Study Source<i class="fa fa-external-link-alt"></i></span></p>
</div>

<p><img src="https://user-images.githubusercontent.com/17645053/75114786-11c41d80-5627-11ea-9e03-009bda02ad1b.png" alt="Quick General Intro" loading="lazy"></p>
<span id="more"></span>

<p><img src="https://user-images.githubusercontent.com/17645053/75114532-b85aef00-5624-11ea-9a9a-3f2a70ed5728.png" alt="Kubernetes" loading="lazy"></p>
<p><strong>Master</strong></p>
<p><strong>1 etcd</strong> is a persistent, lightweight, distributed, key-value data store developed by <span class="exturl" data-url="aHR0cHM6Ly93d3cud2lraXdhbmQuY29tL2VuL0NvcmVPUw==">CoreOS<i class="fa fa-external-link-alt"></i></span> that reliably stores the configuration data of the cluster, representing the overall state of the cluster at any given point of time. Other components watch for changes to this store to bring themselves into the desired state</p>
<p>Hold all metadata?</p>
<p><strong>2 API server</strong> is a key component and serves the Kubernetes <span class="exturl" data-url="aHR0cHM6Ly93d3cud2lraXdhbmQuY29tL2VuL0FwcGxpY2F0aW9uX3Byb2dyYW1taW5nX2ludGVyZmFjZQ==">API<i class="fa fa-external-link-alt"></i></span> using <span class="exturl" data-url="aHR0cHM6Ly93d3cud2lraXdhbmQuY29tL2VuL0pTT04=">JSON<i class="fa fa-external-link-alt"></i></span> over <span class="exturl" data-url="aHR0cHM6Ly93d3cud2lraXdhbmQuY29tL2VuL0h5cGVydGV4dF9UcmFuc2Zlcl9Qcm90b2NvbA==">HTTP<i class="fa fa-external-link-alt"></i></span>, which provides both the internal and external interface to Kubernetes.[<span class="exturl" data-url="aHR0cHM6Ly93d3cud2lraXdhbmQuY29tL2VuL0t1YmVybmV0ZXMjY2l0ZW5vdGVkb2ludHJvMjU=">25]<i class="fa fa-external-link-alt"></i></span>[<span class="exturl" data-url="aHR0cHM6Ly93d3cud2lraXdhbmQuY29tL2VuL0t1YmVybmV0ZXMjY2l0ZW5vdGUxMzQ=">34]<i class="fa fa-external-link-alt"></i></span> The API server processes and validates <span class="exturl" data-url="aHR0cHM6Ly93d3cud2lraXdhbmQuY29tL2VuL1JlcHJlc2VudGF0aW9uYWxfc3RhdGVfdHJhbnNmZXI=">REST<i class="fa fa-external-link-alt"></i></span> requests and updates state of the <span class="exturl" data-url="aHR0cHM6Ly93d3cud2lraXdhbmQuY29tL2VuL0FwcGxpY2F0aW9uX3Byb2dyYW1taW5nX2ludGVyZmFjZQ==">API<i class="fa fa-external-link-alt"></i></span> objects in <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2NvcmVvcy9ldGNk">etcd<i class="fa fa-external-link-alt"></i></span>, thereby allowing clients to configure workloads and containers across Worker nodes.</p>
<p>Commands?</p>
<p><strong>3 Scheduler</strong> is the pluggable component that selects which node an unscheduled pod (the basic entity managed by the scheduler) should run on based on resource availability. Scheduler tracks resource utilization on each node to ensure that workload is not scheduled in excess of the available resources. For this purpose, the scheduler must know the resource requirements, resource availability and a variety of other user-provided constraints and policy directives such as quality-of-service, affinity&#x2F;anti-affinity requirements, data locality and so on. In essence, the scheduler’s role is to match resource &quot;supply&quot; to workload &quot;demand&quot;. </p>
<p>Detection?</p>
<p><strong>4 Controller manager</strong> is the process in which the core Kubernetes controllers like DaemonSet Controller and Replication Controller run. The controllers communicate with the API server to create, update and delete the resources they manage (pods, service endpoints, etc.)</p>
<p>The one who gives the commands?</p>
<p><strong>Node&#x2F;Worker&#x2F;Minion</strong></p>
<p><strong>Kubelet</strong> is responsible for the running state of each node, ensuring that all containers on the node are healthy. It takes care of starting, stopping, and maintaining application containers organized into pods as directed by the control plane.[<span class="exturl" data-url="aHR0cHM6Ly93d3cud2lraXdhbmQuY29tL2VuL0t1YmVybmV0ZXMjY2l0ZW5vdGVkb2ludHJvMjU=">25]<i class="fa fa-external-link-alt"></i></span>[<span class="exturl" data-url="aHR0cHM6Ly93d3cud2lraXdhbmQuY29tL2VuL0t1YmVybmV0ZXMjY2l0ZW5vdGUzNg==">36]<i class="fa fa-external-link-alt"></i></span></p>
<p>Kubelet monitors the state of a pod and if not in the desired state, the pod will be redeployed to the same node. The node status is relayed every few seconds via heartbeat messages to the master. Once the master detects a node failure, the Replication Controller observes this state change and launches pods on other healthy nodes.</p>
<p><strong>Container</strong> resides inside a Pod. The container is the lowest level of a micro-service which holds the running application, the libraries and their dependencies. Containers can be exposed to the world through an external IP address.</p>
<p><strong>Kube-proxy</strong> is an implementation of a <span class="exturl" data-url="aHR0cHM6Ly93d3cud2lraXdhbmQuY29tL2VuL1Byb3h5X3NlcnZlcg==">network proxy<i class="fa fa-external-link-alt"></i></span> and a <span class="exturl" data-url="aHR0cHM6Ly93d3cud2lraXdhbmQuY29tL2VuL0xvYWRfYmFsYW5jaW5nXyhjb21wdXRpbmcp">load balancer<i class="fa fa-external-link-alt"></i></span>, and it supports the service abstraction along with other networking operation.[<span class="exturl" data-url="aHR0cHM6Ly93d3cud2lraXdhbmQuY29tL2VuL0t1YmVybmV0ZXMjY2l0ZW5vdGVkb2ludHJvMjU=">25]<i class="fa fa-external-link-alt"></i></span> It is responsible for routing traffic to the appropriate container based on IP and port number of the incoming request</p>
<ul>
<li>A <a target="_blank" rel="noopener" href="https://www.nginx.com/resources/glossary/reverse-proxy-server"><strong>reverse proxy</strong></a> accepts a request from a client, forwards it to a server that     can fulfill it, and returns the server’s response to the client.</li>
<li>A <a target="_blank" rel="noopener" href="https://www.nginx.com/resources/glossary/load-balancing"><strong>load balancer</strong></a> distributes incoming client requests among a group of servers,     in each case returning the response from the selected server to the     appropriate client.</li>
</ul>
<p><strong>cAdvisor</strong> is an agent that monitors and gathers resource usage and performance metrics such as CPU, memory, file and network usage of containers on each node.</p>
<p><img src="https://user-images.githubusercontent.com/17645053/75114543-cf014600-5624-11ea-970c-028f5543f3c2.png" alt="337641-20160121153024500-830400402" loading="lazy"></p>
<p><img src="https://user-images.githubusercontent.com/17645053/75114548-d6c0ea80-5624-11ea-9796-5343e0fcf4e4.png" alt="337641-20160121153025562-961251045" loading="lazy"></p>
<p><img src="https://user-images.githubusercontent.com/17645053/75114561-f5bf7c80-5624-11ea-8266-550e7c3209d4.png" alt="337641-20160121153022422-1270227504" loading="lazy"></p>
<p>在分布式系统中，部署，调度，伸缩一直是最为重要的也最为基础的功能。Kubernets 就是希望解决这一序列问题的。</p>
<p><span class="exturl" data-url="aHR0cHM6Ly95ZWFzeS5naXRib29rcy5pby9kb2NrZXJfcHJhY3RpY2UvY29udGVudC9rdWJlcm5ldGVzL3F1aWNrc3RhcnQuaHRtbA==">https://yeasy.gitbooks.io/docker_practice/content/kubernetes/quickstart.html<i class="fa fa-external-link-alt"></i></span></p>
<p><strong>快速上手</strong></p>
<p>目前，Kubenetes 支持在多种环境下的安装，包括本地主机（Fedora）、云服务（Google GAE、AWS 等）。然而最快速体验 Kubernetes 的方式显然是本地通过 Docker 的方式来启动相关进程。</p>
<p>下图展示了在单节点使用 Docker 快速部署一套 Kubernetes 的拓扑。</p>
<p><img src="https://user-images.githubusercontent.com/17645053/75114565-03750200-5625-11ea-84be-574cb0dc521c.png" alt="k8s-singlenode-docker" loading="lazy"></p>
<p>图 1.21.2.1 - 在 Docker 中启动 Kubernetes</p>
<p><strong>Kubernetes依赖Etcd服务来维护所有主节点的状态。</strong></p>
<p><strong>启动Etcd服务。</strong></p>
<p>docker run --net&#x3D;host -d gcr.io&#x2F;google_containers&#x2F;etcd:2.0.9 &#x2F;usr&#x2F;local&#x2F;bin&#x2F;etcd --addr&#x3D;127.0.0.1:4001 --bind-addr&#x3D;0.0.0.0:4001 --data-dir&#x3D;&#x2F;var&#x2F;etcd&#x2F;data</p>
<p><strong>启动主节点</strong></p>
<p>启动kubelet。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">docker run --net=host -d -v /var/run/docker.sock:/var/run/docker.sock gcr.io/google_containers/hyperkube:v0.17.0 /hyperkube kubelet --api_servers=http://localhost:8080 --v=2 --address=0.0.0.0 --enable_server --hostname_override=127.0.0.1 --config=/etc/kubernetes/manifests</span><br></pre></td></tr></table></figure>

<p><strong>启动服务代理</strong></p>
<p>docker run -d --net&#x3D;host --privileged gcr.io&#x2F;google_containers&#x2F;hyperkube:v0.17.0 &#x2F;hyperkube proxy --master&#x3D;<span class="exturl" data-url="aHR0cDovLzEyNy4wLjAuMTo4MDgwLw==">http://127.0.0.1:8080<i class="fa fa-external-link-alt"></i></span> --v&#x3D;2</p>
<p><strong>测试状态</strong></p>
<p>在本地访问 8080 端口，可以获取到如下的结果：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ curl 127.0.0.1:8080</span><br><span class="line"> &#123;</span><br><span class="line">  <span class="string">&quot;paths&quot;</span>: [</span><br><span class="line">   <span class="string">&quot;/api&quot;</span>,</span><br><span class="line">   <span class="string">&quot;/api/v1beta1&quot;</span>,</span><br><span class="line">   <span class="string">&quot;/api/v1beta2&quot;</span>,</span><br><span class="line">   <span class="string">&quot;/api/v1beta3&quot;</span>,</span><br><span class="line">   <span class="string">&quot;/healthz&quot;</span>,</span><br><span class="line">   <span class="string">&quot;/healthz/ping&quot;</span>,</span><br><span class="line">   <span class="string">&quot;/logs/&quot;</span>,</span><br><span class="line">   <span class="string">&quot;/metrics&quot;</span>,</span><br><span class="line">   <span class="string">&quot;/static/&quot;</span>,</span><br><span class="line">   <span class="string">&quot;/swagger-ui/&quot;</span>,</span><br><span class="line">   <span class="string">&quot;/swaggerapi/&quot;</span>,</span><br><span class="line">   <span class="string">&quot;/validate&quot;</span>,</span><br><span class="line">   <span class="string">&quot;/version&quot;</span></span><br><span class="line">  ]</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>



<p><strong>查看服务</strong></p>
<p>所有服务启动后，查看本地实际运行的 Docker 容器，有如下几个。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">CONTAINER ID    IMAGE                    COMMAND        CREATED       STATUS       PORTS        NAMES</span><br><span class="line"> ee054db2516c    gcr.io/google_containers/hyperkube:v0.17.0  &quot;/hyperkube schedule  2 days ago     Up 1 days                k8s_scheduler.509f29c9_k8s-master-127.0.0.1_default_9941e5170b4365bd4aa91f122ba0c061_e97037f5</span><br><span class="line"> 3b0f28de07a2    gcr.io/google_containers/hyperkube:v0.17.0  &quot;/hyperkube apiserve  2 days ago     Up 1 days                k8s_apiserver.245e44fa_k8s-master-127.0.0.1_default_9941e5170b4365bd4aa91f122ba0c061_6ab5c23d</span><br><span class="line"> 2eaa44ecdd8e    gcr.io/google_containers/hyperkube:v0.17.0  &quot;/hyperkube controll  2 days ago     Up 1 days                k8s_controller-manager.33f83d43_k8s-master-127.0.0.1_default_9941e5170b4365bd4aa91f122ba0c061_1a60106f</span><br><span class="line"> 30aa7163cbef    gcr.io/google_containers/hyperkube:v0.17.0  &quot;/hyperkube proxy --  2 days ago     Up 1 days                jolly_davinci</span><br><span class="line"> a2f282976d91    gcr.io/google_containers/pause:0.8.0     &quot;/pause&quot;        2 days ago     Up 2 days                k8s_POD.e4cc795_k8s-master-127.0.0.1_default_9941e5170b4365bd4aa91f122ba0c061_e8085b1f</span><br><span class="line"> c060c52acc36    gcr.io/google_containers/hyperkube:v0.17.0  &quot;/hyperkube kubelet  2 days ago     Up 1 days                serene_nobel</span><br><span class="line"> cc3cd263c581    gcr.io/google_containers/etcd:2.0.9     &quot;/usr/local/bin/etcd  2 days ago     Up 1 days                happy_turing</span><br></pre></td></tr></table></figure>



<p>这些服务大概分为三类：主节点服务、工作节点服务和其它服务。</p>
<p><strong>主节点服务</strong></p>
<ul>
<li>apiserver 是整个系统的对外接口，提供     RESTful 方式供客户端和其它组件调用；</li>
<li>scheduler 负责对资源进行调度，分配某个     pod 到某个节点上；</li>
<li>controller-manager 负责管理控制器，包括 endpoint-controller（刷新服务和 pod 的关联信息）和 replication-controller（维护某个     pod 的复制为配置的数值）。</li>
</ul>
<p><strong>工作节点服务</strong></p>
<ul>
<li>kubelet 是工作节点执行操作的     agent，负责具体的容器生命周期管理，根据从数据库中获取的信息来管理容器，并上报 pod 运行状态等；</li>
<li>proxy 为 pod 上的服务提供访问的代理。</li>
</ul>
<p><strong>其它服务</strong></p>
<ul>
<li>Etcd 是所有状态的存储数据库；</li>
<li>gcr.io&#x2F;google_containers&#x2F;pause:0.8.0 是 Kubernetes 启动后自动 pull 下来的测试镜像。</li>
</ul>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Kubernetes/" rel="tag"><i class="fa fa-tag"></i> Kubernetes</a>
              <a href="/tags/Tech-Study/" rel="tag"><i class="fa fa-tag"></i> Tech Study</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/hello-world/" rel="prev" title="Hello World">
                  <i class="fa fa-chevron-left"></i> Hello World
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/LC28/" rel="next" title="LC28">
                  LC28 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    
  <div class="comments" id="disqus_thread">
    <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
  </div>
  
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 2014 – 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">NexT</span>
</div>
  <div class="powered-by">Powered by <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & <a href="https://theme-next.js.org/">NexT.Gemini</a>
  </div><div class="footer-custom">
Website source code <span class="exturl theme-link" data-url="aHR0cHM6Ly9naXRodWIuY29tL0hlc3RlckcvSGVzdGVyRy5naXRodWIuaW8=">here</span>
</div>


    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@next-theme/pjax@0.5.0/pjax.min.js" integrity="sha256-3NkoLDrmHLTYj7csHIZSr0MHAFTXth7Ua/DDt4MRUAg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.11.1/source/js/comments.min.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.11.1/source/js/utils.min.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.11.1/source/js/motion.min.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.11.1/source/js/next-boot.min.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.11.1/source/js/bookmark.min.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.11.1/source/js/pjax.min.js"></script>

  
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.11.1/source/js/third-party/search/local-search.min.js"></script>


  <script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"default","dark":"dark"},"js":{"url":"https://cdn.jsdelivr.net/npm/mermaid@9.0.1/dist/mermaid.min.js","integrity":"sha256-CemUs9ITT7liCZpVMktcEw0BpAOZ1+mujlMB3UyuImU="}}</script>
  <script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.11.1/source/js/third-party/tags/mermaid.min.js"></script>



  




  

  <script class="next-config" data-name="enableMath" type="application/json">false</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"ams","js":{"url":"https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js","integrity":"sha256-r+3itOMtGGjap0x+10hu6jW/gZCzxHsoKrOd7gyRSGY="}}</script>
<script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.11.1/source/js/third-party/math/mathjax.min.js"></script>


<script class="next-config" data-name="disqus" type="application/json">{"enable":true,"shortname":"next-theme","count":true,"i18n":{"disqus":"disqus"}}</script>
<script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.11.1/source/js/third-party/comments/disqus.min.js"></script>

</body>
</html>
